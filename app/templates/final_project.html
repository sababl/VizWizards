<!DOCTYPE html>
<html lang="en" ng-app="myApp">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Life Expectancy Analysis</title>
  <!-- Angular Libraries -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-animate.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-aria.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-messages.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.2.5/angular-material.min.js"></script>

  <!-- Angular Material CSS -->
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.2.5/angular-material.min.css">

  <!-- D3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/static/css/final_project.css">

  <!-- Custom JS -->
  <script src="/static/js/chart_config.js"></script>
  <script src="/static/js/le_global.js"></script>
  <script src="/static/js/le_error.js"></script>
  <script src="/static/js/finalbox.js"></script>
  <script src="/static/js/le_spider.js"></script>
  <script src="/static/js/finalscatter.js"></script>
  <script src="/static/js/finalstackedbar.js"></script>
  <script src="/static/js/finalline.js"></script>
  <script src="/static/js/le_bubble.js"></script>
  <!-- <script src="/static/js/finalchoropleth.js"></script> -->
</head>

<body ng-controller="FormController" layout="column">
  <!-- Toolbar -->
  <md-toolbar class="md-primary">
    <div class="md-toolbar-tools" layout="column">
      <div layout="row" layout-align="space-between center" style="width: 100%">
        <h2 class="md-title">Life Expectancy Analysis</h2>
      </div>
      <md-tabs md-stretch-tabs="always" md-selected="selectedTab" class="md-primary">
        <md-tab>
          <md-tab-label>
            <span ng-click="scrollTo('global-overview')">Global Overview</span>
          </md-tab-label>
        </md-tab>
        <md-tab>
          <md-tab-label>
            <span ng-click="scrollTo('regional-insights')">Regional & Continental Insights</span>
          </md-tab-label>
        </md-tab>
        <md-tab>
          <md-tab-label>
            <span ng-click="scrollTo('country-comparisons')">Country Comparisons</span>
          </md-tab-label>
        </md-tab>
        <md-tab>
          <md-tab-label>
            <span ng-click="scrollTo('gender-analysis')">Gender-Based Analysis</span>
          </md-tab-label>
        </md-tab>
        <md-tab>
          <md-tab-label>
            <span ng-click="scrollTo('covid-impact')">COVID-19 Impact</span>
          </md-tab-label>
        </md-tab>
      </md-tabs>
    </div>
  </md-toolbar>

  <!-- Main Content -->
  <md-content flex layout-padding>
    <!-- Global Overview Section -->
    <section id="global-overview" class="section-container">
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Global Overview</span>
            <span class="md-subhead">Tracking the global progression of life expectancy over time</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <div class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Global Trends</h3>
            </div>
            <p class="chart-subtitle">Analysis of worldwide life expectancy trends from 1950 to 2020</p>
            <div id="globalTrendsChart" class="chart-placeholder">Chart loading...</div>
          </div>
        </md-card-content>
      </md-card>
    </section>

    <!-- Regional & Continental Insights Section -->
    <section id="regional-insights" class="section-container">
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Regional & Continental Insights</span>
            <span class="md-subhead">Detailed analysis of factors influencing life expectancy</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <div class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Socioeconomic Factors</h3>
              <div class="filters">
                <md-select class="filter-select" ng-model="formData.year" ng-change="generateErroPlot()"
                  aria-label="Select Year" md-container-class="select-on-body" md-append-to-body="true">
                  <md-option ng-repeat="year in years" ng-value="year">{{year}}</md-option>
                </md-select>
                <md-select class="filter-select" ng-model="formData.region" ng-change="generateErroPlot()"
                  aria-label="Select Region">
                  <md-option ng-repeat="region in regions" ng-value="region">{{region}}</md-option>
                </md-select>
              </div>
            </div>
            <p class="chart-subtitle">Impact of GDP, education, and healthcare access on life expectancy</p>
            <div id="error-chart" class="chart-placeholder">Chart loading...</div>
          </div>

          <!-- Regional Life Expectancy Distribution Chart -->
          <div class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Regional Life Expectancy Distribution</h3>
            </div>
            <p class="chart-subtitle">Comparative analysis of life expectancy distribution across global regions</p>
            <h2 style="text-align: center;">Average Life Expectancy at Birth by Region (2000–2021)</h2>
            <div class="info-box">
              <p>
                This box plot compares average life expectancy at birth across global regions from 2000 to 2021,
                showing significant differences in longevity. Africa has the lowest median, while Europe and the
                Western Pacific have the highest. The Americas, Eastern Mediterranean, and South-East Asia fall
                in between, showing gradual improvements over time.
              </p>
            </div>
            <div class="chart-placeholder">
              <svg id="box-chart"></svg>
            </div>
          </div>
        </md-card-content>
      </md-card>
    </section>

    <!-- Country Comparisons Section -->
    <section id="country-comparisons" class="section-container">
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Country Comparisons</span>
            <span class="md-subhead">Comparing life expectancy across different countries</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <div class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Spider (Radar) Chart</h3>
              <div class="filters">
                <md-select class="filter-select" ng-model="spiderFormData.selectedCountries" multiple
                  placeholder="Select countries (max 10)" aria-label="Countries">
                  <md-option ng-repeat="country in countries" ng-value="country">{{country}}</md-option>
                </md-select>
                <md-select class="filter-select" ng-model="spiderFormData.sex" placeholder="Sex" aria-label="Sex">
                  <md-option value="Male">Male</md-option>
                  <md-option value="Female">Female</md-option>
                  <md-option value="Both sexes">Both sexes</md-option>
                </md-select>
                <md-select class="filter-select" ng-model="spiderFormData.year" placeholder="Year" aria-label="Year">
                  <md-option ng-repeat="year in years" ng-value="year">{{year}}</md-option>
                </md-select>
              </div>
            </div>
            <p class="chart-subtitle">Compare multiple countries on life-expectancy metrics</p>

            <div id="radar-chart" class="chart-placeholder">Chart loading...</div>
          </div>
        </md-card-content>
      </md-card>
    </section>

    <!-- Gender-Based Analysis Section -->
    <section id="gender-analysis" class="section-container">
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Gender-Based Analysis</span>
            <span class="md-subhead">Exploring the differences in life expectancy between genders</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <div class="info-box">
            <p>
              The interactive scatter plot visualizes the lowest life expectancy of males at birth from 2000 to 2021,
              showing trends across different countries. Over time, there is a gradual increase in life expectancy,
              though disparities remain.
            </p>
          </div>
          <div class="slider-container">
            <div class="slider-labels">
              <span>2000</span>
              <span>2021</span>
            </div>
            <input type="range" id="year-slider" min="2000" max="2021" value="2000" step="1">
            <span id="year-display">2000</span>
          </div>
          <div id="scatter-chart" class="chart-container"></div>

          <div class="filters">
            <label for="year">Select Year:</label>
            <select id="year"></select>
          </div>

          <!-- The SVG where bars will be drawn -->
          <svg width="900" height="600" id="bar-chart"></svg>

          <!-- Tooltip (hidden by default) -->
          <div class="tooltip" style="position: absolute; visibility: hidden;"></div>

          <div id="heatmap" class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Women's Life Expectancy Heatmap</h3>
            </div>
            <p class="chart-subtitle">Visualization of women's life expectancy at age 60 across continents</p>
            <div class="info-box">
              <p>
                This heatmap shows women's life expectancy at age 60 across different continents.
                Darker colors indicate higher life expectancy, while lighter colors represent lower values.
              </p>
            </div>
            <div id="heatmap-container" class="chart-placeholder"></div>
          </div>
          <script src="/static/js/finalheatmap.js"></script>

          <div class="chart-container">
            <h2 style="text-align: center;">Female Life Expectancy At Age 60 (2000–2021)</h2>
            <div class="select-container">
              <label for="country-select">Select Country:</label>
              <select id="country-select"></select>
            </div>
            <div id="tooltip" class="tooltip"></div>
            <svg id="line-chart" width="800" height="500"></svg>
          </div>

          <div class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Global Sex Ratio Distribution</h3>
            </div>
            <p class="chart-subtitle">Geographic distribution of life expectancy sex ratios across countries</p>
            <div class="info-box">
              <p>
                This choropleth map displays the sex ratio of life expectancy across different countries.
                Darker colors indicate higher ratios (where female life expectancy is higher relative to male),
                while lighter colors represent lower ratios. Use the year selector to explore changes over time.
              </p>
            </div>

            <!-- The year selector used by finalchoropleth.js -->
            <div class="filters">
              <label for="yearSelector">Select Year:</label>
              <select id="yearSelector" class="filter-select"></select>
            </div>

            <div class="map-container">
              <div id="map"></div>
              <div id="legend" class="legend"></div>
            </div>
            <div class="chart-container">
              <div class="chart-header">
                <h3 class="chart-title">Global Gender Gap in Life Expectancy</h3>
                <div class="filters">
                  <md-select class="filter-select" ng-model="beeswarmData.year" placeholder="Select Year"
                    aria-label="Year">
                    <md-option ng-repeat="year in years" ng-value="year">{{year}}</md-option>
                  </md-select>
                </div>
              </div>
              <p class="chart-subtitle">Comparing male and female life expectancy across countries</p>
              <div class="info-box">
                <p>
                  This bubble chart reveals how men's and women's lifespans differ across regions.
                  Each circle represents a country, color-coded by continent and sized by population.
                  The horizontal axis shows female life expectancy while the vertical axis shows male life expectancy.
                </p>
              </div>
              <div id="chart-beeswarm" class="chart-placeholder"></div>
            </div>

          </div>

        </md-card-content>
      </md-card>
    </section>

    <!-- COVID-19 Impact Section -->
    <section id="covid-impact" class="section-container">
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">COVID-19 Impact</span>
            <span class="md-subhead">Analysis of COVID-19's impact on global life expectancy</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <!-- Pre vs Post COVID Chart -->
          <div class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Pre vs Post COVID</h3>
              <div class="filters">
                <md-select class="filter-select" ng-model="covidRegion" placeholder="Global">
                  <md-option value="global">Global</md-option>
                  <md-option value="africa">Africa</md-option>
                  <md-option value="americas">Americas</md-option>
                  <md-option value="asia">Asia</md-option>
                  <md-option value="europe">Europe</md-option>
                  <md-option value="oceania">Oceania</md-option>
                </md-select>
              </div>
            </div>
            <p class="chart-subtitle">Comparing life expectancy before and after the COVID-19 pandemic</p>
            <div id="prePostCovidChart" class="chart-placeholder">Chart loading...</div>
          </div>

          <!-- Recovery Patterns Chart -->
          <div class="chart-container">
            <div class="chart-header">
              <h3 class="chart-title">Recovery Patterns</h3>
              <div class="filters">
                <md-select class="filter-select" ng-model="recoveryCountries" placeholder="All Countries">
                  <md-option value="all">All Countries</md-option>
                  <md-option value="highIncome">High Income</md-option>
                  <md-option value="middleIncome">Middle Income</md-option>
                  <md-option value="lowIncome">Low Income</md-option>
                </md-select>
              </div>
            </div>
            <p class="chart-subtitle">Analysis of life expectancy recovery patterns post-COVID</p>
            <div id="recoveryPatternsChart" class="chart-placeholder">Chart loading...</div>
          </div>
        </md-card-content>
      </md-card>
    </section>
  </md-content>
  <script src="/static/js/finalchoropleth.js"></script>
</body>

</html>